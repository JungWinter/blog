<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.45 'georgia',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:'georgia',serif;font-weight:normal;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:2rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:0.87055rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:0.81225rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}ul{margin-left:1.45rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.45rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;font-size:0.85rem;line-height:1.45rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}blockquote{margin-left:1.45rem;margin-right:1.45rem;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.45rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}b{font-weight:bold;}strong{font-weight:bold;}dt{font-weight:bold;}th{font-weight:bold;}li{margin-bottom:calc(1.45rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.45rem;margin-bottom:calc(1.45rem / 2);margin-top:calc(1.45rem / 2);}li > ul{margin-left:1.45rem;margin-bottom:calc(1.45rem / 2);margin-top:calc(1.45rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.45rem / 2);}code{font-size:0.85rem;line-height:1.45rem;}kbd{font-size:0.85rem;line-height:1.45rem;}samp{font-size:0.85rem;line-height:1.45rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:0.96667rem;padding-right:0.96667rem;padding-top:0.725rem;padding-bottom:calc(0.725rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}</style><meta name="generator" content="Gatsby 2.27.0"/><title data-react-helmet="true">python script.py에서 벗어나기</title><link data-react-helmet="true" rel="canonical" href="https://blog.winterjung.dev/2018/06/30/python-make-command"/><meta data-react-helmet="true" name="description" content="파이썬을 이용해 커맨드라인 툴을 만들어 사용할 때 매번 $ python script.py arg1 arg2처럼 입력하기 번거롭다. 그렇다고 setup.py를 만들어 엔트리포인트를 설정하자니 일을 키우는 느낌이다. 이 글에서는 $ script arg1…"/><meta data-react-helmet="true" name="image" content="https://blog.winterjung.dev/header.png"/><meta data-react-helmet="true" property="og:title" content="python script.py에서 벗어나기"/><meta data-react-helmet="true" property="og:url" content="https://blog.winterjung.dev/2018/06/30/python-make-command"/><meta data-react-helmet="true" property="og:description" content="파이썬을 이용해 커맨드라인 툴을 만들어 사용할 때 매번 $ python script.py arg1 arg2처럼 입력하기 번거롭다. 그렇다고 setup.py를 만들어 엔트리포인트를 설정하자니 일을 키우는 느낌이다. 이 글에서는 $ script arg1…"/><meta data-react-helmet="true" property="og:image" content="https://blog.winterjung.dev/header.png"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:title" content="python script.py에서 벗어나기"/><meta data-react-helmet="true" name="twitter:description" content="파이썬을 이용해 커맨드라인 툴을 만들어 사용할 때 매번 $ python script.py arg1 arg2처럼 입력하기 번거롭다. 그렇다고 setup.py를 만들어 엔트리포인트를 설정하자니 일을 키우는 느낌이다. 이 글에서는 $ script arg1…"/><meta data-react-helmet="true" name="twitter:image" content="https://blog.winterjung.dev/header.png"/><meta data-react-helmet="true" name="twitter:creator" content="@res_tin"/><link as="script" rel="preload" href="/webpack-runtime-84088e8545ee1a5e23f5.js"/><link as="script" rel="preload" href="/framework-83e11af5cf111be5ad89.js"/><link as="script" rel="preload" href="/app-23a898d1931e5509aca8.js"/><link as="script" rel="preload" href="/commons-6705e2d802e307e1263e.js"/><link as="script" rel="preload" href="/8883a11f9f64277e87059057aa7daae3f7c23798-2b01de9bd83b66e79b33.js"/><link as="script" rel="preload" href="/component---src-templates-post-jsx-9369db16b141cd88e914.js"/><link as="fetch" rel="preload" href="/page-data/2018/06/30/python-make-command/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3159585216.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/444187323.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion-css="1uuzzhj">.css-1uuzzhj{margin:0 auto;max-width:700px;padding:2.9rem;padding-top:2.175rem;}</style><div class="css-1uuzzhj"><a href="/"><style data-emotion-css="jfvr3k">.css-jfvr3k{margin-bottom:1.45rem;display:inline-block;font-style:normal;}</style><h2 class="css-jfvr3k">winterjung blog</h2><hr/></a><div><h1>python script.py에서 벗어나기</h1><style data-emotion-css="1nw2x84">.css-1nw2x84{word-break:keep-all;}</style><div class="css-1nw2x84"><p>파이썬을 이용해 커맨드라인 툴을 만들어 사용할 때 매번 <code>$ python script.py arg1 arg2</code>처럼 입력하기 번거롭다. 그렇다고 <code>setup.py</code>를 만들어 엔트리포인트를 설정하자니 일을 키우는 느낌이다. 이 글에서는 <code>$ script arg1 arg2</code>처럼 파이썬으로 작성한 스크립트를 간단하게 실행하는 방법에 대해 정리했다.</p>
<blockquote>
<p>이 포스트는 리눅스/맥 OS 기준으로 작성되었으며 윈도우 환경은 <a href="https://soooprmx.com/archives/6471">파이썬을 명령 프롬프트에서 실행하는 방법</a>을 참고하길 추천한다.</p>
</blockquote>
<h2>작은 커맨드라인 툴</h2>
<p>파이썬으로 커맨드라인 툴을 만든다면 간단하게는 <code>sys.argv</code>, 혹은 <a href="https://docs.python.org/3/library/argparse.html">argparse</a>를 사용하거나 더 현대적으로 <a href="http://click.pocoo.org/6/">click</a>을 사용하곤 한다. 이 글에서는 어떻게 커맨드라인 툴을 만드냐가 아닌 만든 툴을 어떻게 쉽게 실행시키냐가 목적이므로 <code>sys.argv</code>를 사용해 아래와 같은 스크립트를 만들었다.</p>
<pre><code class="language-python"># add.py
import sys

x = int(sys.argv[1])
y = int(sys.argv[2])
print(f'{x} + {y} = {x + y}')
</code></pre>
<p>이렇게 만든 스크립트는 다음과 같이 동작한다.</p>
<pre><code class="language-bash">$ python add.py 1 2
1 + 2 = 3
</code></pre>
<p>이제 이 번거로운 13글자의 <code>python add.py</code>라는 명령어를 바꿔보자.</p>
<h2>개선시키기</h2>
<h3>실행 권한 부여</h3>
<pre><code class="language-bash">$ chmod +x add.py
$ ls -alh | grep add.py
-rwxr-xr-x    1 WinterJ  staff    85B  6 30 15:19 add.py
</code></pre>
<p><code>add.py</code>가 실행가능하게 됐지만 바로 실행하면 에러가 발생한다.</p>
<pre><code class="language-bash">$ ./add.py 1 2
./add.py: line 3: syntax error near unexpected token `('
./add.py: line 3: `x = int(sys.argv[1])'
</code></pre>
<p>이는 쉘이 <code>add.py</code>를 파이썬 스크립트임을 알지 못하고 기본적인 <code>/bin/sh</code>로 실행시켰기 때문이다.</p>
<h3>셔뱅 추가</h3>
<p><code>add.py</code> 첫 줄에 <a href="https://ko.wikipedia.org/wiki/%EC%85%94%EB%B1%85">셔뱅</a>을 추가하자. 파이썬 인터프리터가 설치된 위치는 환경에 따라 다르기때문에 <code>/bin/python3.6</code>처럼 적지 않고 다음과 같이 PATH 환경 변수에 등록된 파이썬 실행 경로를 참조했다.</p>
<pre><code class="language-python">#!/usr/bin/env python
import sys

# ...
</code></pre>
<p>이제 다시 실행해보면 파이썬 인터프리터로 실행된 결과가 출력된다.</p>
<pre><code class="language-bash">$ ./add.py 1 2
1 + 2 = 3
</code></pre>
<h3>확장자 제거</h3>
<p>이젠 쉘에서 <code>add.py</code>를 실행시킬 때 셔뱅을 통해 파이썬 인터프리터를 사용해야함을 명시해줬으므로 굳이 <code>.py</code> 확장자가 필요없다.</p>
<pre><code class="language-bash">$ mv add.py add
$ ./add 1 2
1 + 2 = 3
</code></pre>
<p>이 정도로도 충분히 만족하며 사용할 수 있으나 해당 폴더가 아니라면 실행되지 않는 번거로움이 여전히 존재한다.</p>
<h3>bin에 넣기</h3>
<p>이렇게 만든 <code>./add</code>를 바로 <code>/usr/local/bin</code>이나 <code>/usr/bin</code>에 넣으면 기존 PATH에 등록되어있기 때문에 손쉽게 끝낼 수 있다. 다만 이런 방식은 같은 이름을 가진 명령어가 이미 존재해 충돌을 발생시킬 수 있고, 나중에 스크립트를 수정하거나 삭제할 시 어떤게 내 스크립트였고 지우면 안되는건지 되는건지 헷갈려 관리가 어려워질 수 있다. 여기선 홈 경로에 bin 폴더를 생성시키고 PATH 환경 변수에 커스텀 경로를 추가시켜주었다.</p>
<pre><code class="language-bash">$ mkdir ~/bin
$ cp add ~/bin
$ export PATH=$PATH":$HOME/bin"
</code></pre>
<p>다만 export한 환경변수는 해당 세션에만 유효하므로 터미널을 껐다 키거나 로그인할 때 마다 다시 설정해줘야한다. 이를 방지하기 위해서 적절한 위치에 export 명령어를 추가시켜주면 된다. 만약 zsh를 사용한다면 <code>~/.zshrc</code>에 추가시키자.</p>
<pre><code class="language-bash">$ echo 'export PATH=$PATH":$HOME/bin"' >> ~/.zshrc
</code></pre>
<p>이제 드디어 완벽한 커맨드라인 툴이 됐다. <code>python add.py</code> 13글자에서 시작해 <code>add</code> 3글자 까지 줄였고 그럴듯한 나만의 스크립트를 사용할 수 있게됐다. 🎉</p>
<pre><code class="language-bash">$ add 1 2
1 + 2 = 3
</code></pre>
<h2>참고 자료</h2>
<ul>
<li><a href="https://dbader.org/blog/how-to-make-command-line-commands-with-python">How Do I Make My Own Command-Line Commands Using Python?</a></li>
<li><a href="https://unix.stackexchange.com/questions/3809/how-can-i-make-a-program-executable-from-everywhere">How can I make a program executable from everywhere</a></li>
</ul></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2018/06/30/python-make-command";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-ca8adf9770cfeec4c092.js"],"app":["/app-23a898d1931e5509aca8.js"],"component---src-pages-index-jsx":["/component---src-pages-index-jsx-be534ad704344c6a02c9.js"],"component---src-pages-my-files-jsx":["/component---src-pages-my-files-jsx-70a87fd589072e8a2002.js"],"component---src-templates-post-jsx":["/component---src-templates-post-jsx-9369db16b141cd88e914.js"]};/*]]>*/</script><script src="/polyfill-ca8adf9770cfeec4c092.js" nomodule=""></script><script src="/component---src-templates-post-jsx-9369db16b141cd88e914.js" async=""></script><script src="/8883a11f9f64277e87059057aa7daae3f7c23798-2b01de9bd83b66e79b33.js" async=""></script><script src="/commons-6705e2d802e307e1263e.js" async=""></script><script src="/app-23a898d1931e5509aca8.js" async=""></script><script src="/framework-83e11af5cf111be5ad89.js" async=""></script><script src="/webpack-runtime-84088e8545ee1a5e23f5.js" async=""></script></body></html>